# Flutterissuesapp

## WARNINGS!!!

This project is using the integration_test SDK so it Flutter has to be on the beta channel for now, see * [integration section](#integration) for more info
otherwise, you can use:
```yaml
override_dependencies:
    crypto: ^3.0.0
    convert: ^3.0.0
    args: ^2.0.0
```
## GITHUB OUTAGE 16/05
Since the begining of the day there is a major outage on github:[Source](https://www.githubstatus.com/incidents/zbpwygxwb3gw)
So my github workflow can't be tested at the moment!

### [EDIT 20H00]
- Github action seems to be up

## Implementation

- Actually the issues page is an infinite scroll list which can be filtered with **states:open** and **states:closed** at the moment.
- For the details page, each comment is wrapped inside ``__Markdown()__``, which is blocking the Listscroll
- Theming: there is a switch on the AppBar to switch between dark and light theme
- Github Action: It will check on formating, analyzing and test on push for branches main et dev. For the branch main, it will also publish the release build to Firebase App Publication and adding the appbundle to TestLab when pushed on dev branch

## Folder structures

- Bloc and UI can be found directly in the lib folder
- The repositories are stored inside separated packages so it can be more maintainable and reusable (github repo or packages on pub.dev). Entities are in the domain folder and the data layer is inside infrastructure folder.
- In all the project, each folder contains a barrel file that export every file of the parent folder(s) (if any) and current folder



## How to build and test

### Generate the code

1. __flutter pub run build_runner build --delete-conflicting-outputs__
2. Repeat the same command inside each package in packages/

### <a name="integration"></a>Run the integration test

- flutter drive --flavor development --driver=test_driver/integration_test.dart --target=integration_test/app_test.dart -d <DEVICE_ID>

- To generate the APK files for TestLab, see more info in * [integration_test usage page](https://github.com/flutter/flutter/tree/master/packages/integration_test#usage)
```bash
pushd android
# flutter build generates files in android/ for building the app
flutter build apk --flavor production -t lib/main_production.dart
gradle app:assembleAndroidTest
gradle app:assembleDebug -Ptarget=integration_test/app_test.dart
popd
```

__Use ./gradlew on iOS instead of gradle__

For the sake of simplicity i am leaving here VGV readme

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

[![Very Good Ventures][logo]][very_good_ventures_link]

Developed with üíô by [Very Good Ventures][very_good_ventures_link] ü¶Ñ

![coverage][coverage_badge]
[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

A Very Good Flutter Starter Project created by the [Very Good Ventures Team][very_good_ventures_link].

Generated by the [Very Good CLI][very_good_cli_link] ü§ñ

---

## Getting Started üöÄ

This project contains 3 flavors:

- development
- staging
- production

To run the desired flavor either use the launch configuration in VSCode/Android Studio or use the following commands:

```sh
# Development
$ flutter run --flavor development --target lib/main_development.dart

# Staging
$ flutter run --flavor staging --target lib/main_staging.dart

# Production
$ flutter run --flavor production --target lib/main_production.dart
```

_\*Flutterissuesapp works on iOS, Android, and Web._

---

## Running Tests üß™

To run all unit and widget tests use the following command:

```sh
$ flutter test --coverage --test-randomize-ordering-seed random
```

To view the generated coverage report you can use [lcov](https://github.com/linux-test-project/lcov).

```sh
# Generate Coverage Report
$ genhtml coverage/lcov.info -o coverage/

# Open Coverage Report
$ open coverage/index.html
```

---

## Working with Translations üåê

This project relies on [flutter_localizations][flutter_localizations_link] and follows the [official internationalization guide for Flutter][internationalization_link].

### Adding Strings

1. To add a new localizable string, open the `app_en.arb` file at `lib/l10n/arb/app_en.arb`.

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    }
}
```

2. Then add a new key/value and description

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    },
    "helloWorld": "Hello World",
    "@helloWorld": {
        "description": "Hello World Text"
    }
}
```

3. Use the new string

```dart
import 'package:flutterissuesapp/l10n/l10n.dart';

@override
Widget build(BuildContext context) {
  final l10n = context.l10n;
  return Text(l10n.helloWorld);
}
```

### Adding Supported Locales

Update the `CFBundleLocalizations` array in the `Info.plist` at `ios/Runner/Info.plist` to include the new locale.

```xml
    ...

    <key>CFBundleLocalizations</key>
	<array>
		<string>en</string>
		<string>es</string>
	</array>

    ...
```

### Adding Translations

1. For each supported locale, add a new ARB file in `lib/l10n/arb`.

```
‚îú‚îÄ‚îÄ l10n
‚îÇ   ‚îú‚îÄ‚îÄ arb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app_en.arb
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_es.arb
```

2. Add the translated strings to each `.arb` file:

`app_en.arb`

```arb
{
    "@@locale": "en",
    "counterAppBarTitle": "Counter",
    "@counterAppBarTitle": {
        "description": "Text shown in the AppBar of the Counter Page"
    }
}
```

`app_es.arb`

```arb
{
    "@@locale": "es",
    "counterAppBarTitle": "Contador",
    "@counterAppBarTitle": {
        "description": "Texto mostrado en la AppBar de la p√°gina del contador"
    }
}
```

[coverage_badge]: coverage_badge.svg
[flutter_localizations_link]: https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html
[internationalization_link]: https://flutter.dev/docs/development/accessibility-and-localization/internationalization
[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg
[license_link]: https://opensource.org/licenses/MIT
[logo]: https://raw.githubusercontent.com/VeryGoodOpenSource/very_good_analysis/main/assets/vgv_logo.png
[very_good_analysis_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg
[very_good_analysis_link]: https://pub.dev/packages/very_good_analysis
[very_good_cli_link]: https://github.com/VeryGoodOpenSource/very_good_cli
[very_good_ventures_link]: https://verygood.ventures/?utm_source=github&utm_medium=banner&utm_campaign=core
